(function(){var e={345:function(e,t,o){"use strict";var n=o(9798),s=o(4220);const r={id:"app"};function i(e,t,o,n,i,l){const a=(0,s.g2)("Home");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(a)])}const l={class:"container"};function a(e,t,o,n,r,i){const a=(0,s.g2)("ContainerBox"),c=(0,s.g2)("AlbumBox"),u=(0,s.g2)("listUpper"),d=(0,s.g2)("Buttons");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(a,{colorClass:"box-1",user:r.user,points:r.points,counter:r.counter,lvl:r.lvl},null,8,["user","points","counter","lvl"]),(0,s.bF)(c,{topUsers:r.topUsers,onlineCount:r.onlineCount,level:"lvl"},null,8,["topUsers","onlineCount"]),(0,s.bF)(u),(0,s.bF)(d,{onButtonClick:i.handleClick},null,8,["onButtonClick"])])}o(4645),o(9063),o(988),o(6734),o(7797),o(968);var c=o(7700);const u={class:"row"},d={class:"col-4"},p={class:"list-group inf shadow-lg"},h={href:"#",class:"list-group-item list-group-item-action d-flex gap-3","aria-current":"true"},g={class:"d-flex gap-2 w-50 justify-content-between"},f={class:"opacity-50 text-nowrap"},m={href:"#",class:"list-group-item list-group-item-action d-flex gap-3","aria-current":"true"},v={class:"d-flex gap-2 w-50 justify-content-between"},k={class:"opacity-50 text-nowrap"},b={class:"col-8"},y={href:"#",class:"list-group-item list-group-item-action d-flex gap-3","aria-current":"true"},w={class:"d-flex gap-2 w-100 justify-content-between"},C=["src"],L={class:"mb-0"},x={class:"opacity-50 text-nowrap"};function A(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",d,[(0,s.Lk)("div",p,[(0,s.Lk)("a",h,[(0,s.Lk)("div",g,[(0,s.Lk)("small",f,"Online: "+(0,c.v_)(o.onlineCount),1)])]),t[0]||(t[0]=(0,s.Lk)("a",{href:"#",class:"list-group-item list-group-item-action d-flex gap-3","aria-current":"true"},[(0,s.Lk)("div",{class:"d-flex gap-2 w-50 justify-content-between"},[(0,s.Lk)("small",{class:"opacity-50 text-nowrap"},"Standart")])],-1)),(0,s.Lk)("a",m,[(0,s.Lk)("div",v,[(0,s.Lk)("small",k,"Snd "+(0,c.v_)(o.level)+" / 72",1)])])])]),(0,s.Lk)("div",b,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.topUsers,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:"list-group stat shadow-lg",key:t,dense:""},[(0,s.Lk)("a",y,[(0,s.Lk)("div",w,[(0,s.Lk)("img",{src:e.photo,alt:"twbs",width:"28",height:"28",class:"rounded-circle flex-shrink-0"},null,8,C),(0,s.Lk)("div",null,[(0,s.Lk)("small",L,(0,c.v_)(e.name),1)]),(0,s.Lk)("small",x,(0,c.v_)(e.clicks),1)])])])))),128))])])}var _={name:"AppBox",props:{onlineCount:{type:Number,required:!0},level:{type:Number,required:!0},topUsers:{type:Array,required:!0}},components:{},data(){},methods:{},mounted(){}},S=o(1317);const O=(0,S.A)(_,[["render",A],["__scopeId","data-v-3734d2d6"]]);var P=O;const E={class:"full-width-box"},I={class:"row"},B={class:"col-6 blb"};function j(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",I,[t[1]||(t[1]=(0,s.Lk)("div",{class:"col-3 red"},[(0,s.Lk)("i",{class:"bi bi-gift-fill"})],-1)),(0,s.Lk)("div",B,[(0,s.Lk)("button",{type:"button",class:"btn btn-warning rounded-circle btn-circle",onClick:t[0]||(t[0]=(...e)=>o.onButtonClick&&o.onButtonClick(...e))})]),t[2]||(t[2]=(0,s.Lk)("div",{class:"col-3 blue"},[(0,s.Lk)("i",{class:"biss bi bi-gear-fill"})],-1))])])}var F={name:"AppButtons",props:{onButtonClick:{type:Function,required:!0}}};const N=(0,S.A)(F,[["render",j],["__scopeId","data-v-001f87e6"]]);var U=N;const T={class:"row"},X={class:"col"},q={class:"badge text-bg-warning rounded-pill cis"},M=["src"],D={class:"col"},H={class:"badge text-bg-warning rounded-pill"},$={class:"col end"};function K(e,t,o,n,r,i){const l=(0,s.g2)("KnobIndicator");return(0,s.uX)(),(0,s.CE)("div",{class:(0,c.C4)(["full-width-box",o.colorClass])},[(0,s.Lk)("div",T,[(0,s.Lk)("div",X,[(0,s.Lk)("span",q,[(0,s.Lk)("img",{class:"rounded-circle me-1",width:"24",height:"24",src:o.user.photo_url,alt:""},null,8,M),(0,s.eW)((0,c.v_)(o.user.first_name),1)])]),(0,s.Lk)("div",D,[(0,s.Lk)("span",H,(0,c.v_)(o.points),1)]),(0,s.Lk)("div",$,[(0,s.bF)(l,{progress:o.counter,maxProgress:r.maxProgress,color:"orange"},null,8,["progress","maxProgress"])])])],2)}const R={class:"knob-wrapper",viewBox:"0 0 100 100"},W={class:"knob-text"};function z(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",{class:"knob-container",onClick:t[0]||(t[0]=(...e)=>i.onClick&&i.onClick(...e))},[((0,s.uX)(),(0,s.CE)("svg",R,[t[1]||(t[1]=(0,s.Lk)("circle",{class:"knob-bg",cx:"50",cy:"50",r:"45"},null,-1)),(0,s.Lk)("circle",{class:"knob-circle",style:(0,c.Tr)(i.circleStyle),cx:"50",cy:"50",r:"45"},null,4)])),(0,s.Lk)("div",W,(0,c.v_)(o.progress),1)])}var J={name:"KnobIndicator",props:{progress:{type:Number,required:!0,default:0},maxProgress:{type:Number,required:!0,default:100},color:{type:String,default:"orange"},onClickHandler:{type:Function,default:null}},computed:{percentage(){return 100*Math.min(this.progress/this.maxProgress,1)},circleStyle(){const e=2*Math.PI*45,t=e-this.percentage/100*e;return{strokeDasharray:`${e}`,strokeDashoffset:t,stroke:this.color}}},methods:{onClick(){this.onClickHandler&&this.onClickHandler()}}};const G=(0,S.A)(J,[["render",z],["__scopeId","data-v-c811eeb2"]]);var Q=G,V={name:"App",components:{KnobIndicator:Q},props:{colorClass:{type:String,required:!0},user:{type:Object,default:()=>({userName:"No name",avatar:"https://github.com/mdo.png"})},points:{type:Number,required:!0},lvl:{type:Number,required:!0},counter:{type:Number,required:!0}},data(){return{maxProgress:100}},methods:{},mounted(){}};const Y=(0,S.A)(V,[["render",K],["__scopeId","data-v-05d919d6"]]);var Z=Y;const ee={class:"horizontal-scroll-container"},te={class:"horizontal-scroll"},oe=["src"];function ne(e,t,o,n,r,i){return(0,s.uX)(),(0,s.CE)("div",ee,[(0,s.Lk)("div",te,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.icons,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"icon-container"},[(0,s.Lk)("img",{src:e,alt:"icon"},null,8,oe)])))),128)),t[0]||(t[0]=(0,s.Lk)("small",{class:""},"Собирайте легендарные звуки для улучшений",-1))])])}var se={data(){return{icons:[]}}};const re=(0,S.A)(se,[["render",ne],["__scopeId","data-v-1587cd0b"]]);var ie=re,le=o(112),ae={name:"HomePage",components:{ContainerBox:Z,AlbumBox:P,listUpper:ie,Buttons:U},data(){return{telega:window.Telegram.WebApp,user:{},points:55,counter:0,lvl:0,audio:null,timeoutId:null,isAudioPlaying:!1,topUsers:[],socket:null,sounds:Array.from({length:72},((e,t)=>`${t+1}.mp3`)),chosenSounds:[],onlineCount:0}},mounted(){if(this.audio=new Audio(`/sounds/${this.getRandomSound()}`),this.audio.loop=!0,this.socket=(0,le.io)("https://1223191-ce40147.tw1.ru"),this.socket.on("updateTop",(({topUsers:e})=>{this.topUsers=e})),this.sendData(),window.Telegram.WebApp.initData){console.log(window.Telegram.WebApp),this.telega.ready();const e=new URLSearchParams(this.telega.initData),t={};e.forEach(((e,o)=>{t[o]=e}));const o=JSON.parse(t.user);console.log(o),this.user=o}else this.userId="undf";this.socket.on("updateOnline",(e=>{this.onlineCount=e,console.log(`Онлайн: ${e}`)}))},methods:{getRandomSound(){if(0===this.sounds.length)return alert("Все звуки использованы!"),null;const e=Math.floor(Math.random()*this.sounds.length),t=this.sounds[e];return this.sounds.splice(e,1),this.chosenSounds.push(t),t},sendData(){this.socket.emit("click",{userId:this.user.id,clicks:this.points,photo:this.user.photo_url,name:this.user.first_name})},handleClick(){this.counter++,this.points=100*this.lvl+this.counter,this.sendData(),Math.floor(this.counter/100)>0&&this.lvlUp(),this.isAudioPlaying||(this.audio.play(),this.isAudioPlaying=!0),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.stopAudio()}),300)},stopAudio(){this.audio.pause(),this.audio.currentTime=0,this.isAudioPlaying=!1,this.counter=0},lvlUp(){this.lvl++,this.counter=0,this.stopAudio(),this.audio=new Audio(`/sounds/${this.getRandomSound()}`),this.audio.loop=!0}}};const ce=(0,S.A)(ae,[["render",a]]);var ue=ce,de={name:"App",components:{Home:ue}};const pe=(0,S.A)(de,[["render",i]]);var he=pe,ge=o(9262),fe=o.n(ge),me=o(3937),ve=(0,me.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),ke=o(1278);(0,ke.k)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),(0,n.Ef)(he).use(ve).use(fe()).mount("#app")},9262:function(){}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,s,r){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],s=e[u][1],r=e[u][2];for(var l=!0,a=0;a<n.length;a++)(!1&r||i>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[a])}))?n.splice(a--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,s,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,r,i=n[0],l=n[1],a=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(a)var u=a(o)}for(t&&t(n);c<i.length;c++)r=i[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=self["webpackChunktelegram_mini_app"]=self["webpackChunktelegram_mini_app"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(345)}));n=o.O(n)})();
//# sourceMappingURL=app.6b09121c.js.map