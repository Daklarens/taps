# Мини-игра с тапами для Telegram

Простая мини-игра в Telegram, где пользователи соревнуются, нажимая кнопку как можно быстрее. Построена на Node.js, Express.js и Socket.io для обеспечения взаимодействия в реальном времени внутри Telegram Web App.

## Демонстрация

Запустите бота в Telegram и нажмите на кнопку «Открыть игру», чтобы увидеть, как счётчик ваших нажатий обновляется мгновенно!

## Возможности

* **Нажимай в реальном времени**: мгновенное обновление счёта при каждом тапе.
* **Интеграция Socket.io**: надёжная связь между клиентами и сервером.
* **Express-сервер**: раздаёт статику и обрабатывает WebSocket-соединения.
* **Telegram Web App**: встроенный интерфейс прямо в чате Telegram.
* **Лёгкий фронтенд**: HTML, CSS и чистый JavaScript без фреймворков.

## Технологии

* **Node.js**
* **Express.js**
* **Socket.io**
* **Telegram Bot API (Web Apps)**

## Установка

1. **Клонировать репозиторий**

   ```bash
   git clone https://github.com/Daklarens/taps.git
   cd taps
   ```

2. **Установить зависимости**

   ```bash
   npm install
   ```

3. **Настроить переменные окружения**
   Создайте файл `.env` в корне проекта и добавьте:

   ```env
   BOT_TOKEN=ваш_токен_бота
   PORT=3000
   DOMAIN=https://ваш-домен.com  # для деплоя Web App
   ```

4. **Запустить сервер**

   ```bash
   npm start
   # или
   node index.js
   ```

## Использование

1. В Telegram откройте вашего бота (например, @your\_bot\_username).
2. Отправьте команду `/start` для получения кнопки Web App.
3. Нажмите **Открыть игру**, чтобы запустить UI игры.
4. Кликайте по кнопке как можно быстрее — ваш счёт и таблица лидеров обновятся в реальном времени.

## Интеграция Web App

* Файлы фронтенда находятся в папке `public/`.
* Express раздаёт их так:

  ```js
  app.use(express.static('public'))
  ```
* Telegram при загрузке Web App предоставляет объект `Telegram.WebApp` для взаимодействия.

## События Socket.io

| Событие      | Направление    | Данные       | Описание                                      |
| ------------ | -------------- | ------------ | --------------------------------------------- |
| `connect`    | Клиент↔Сервер  | `{}`         | Установление нового соединения.               |
| `tap`        | Клиент→Сервер  | `{ userId }` | Срабатывает при тапе пользователя.            |
| `update`     | Сервер→Клиенты | `{ counts }` | Рассылает обновлённые счётчики всем клиентам. |
| `disconnect` | Клиент↔Сервер  | `{}`         | Очистка при отключении пользователя.          |

## Структура проекта

```
├── index.js          # Основной сервер на Express & Socket.io
├── public/
│   ├── index.html    # Интерфейс игры
│   └── script.js     # Логика фронтенда для тапов
├── package.json      # Метаданные и зависимости
├── .env              # Переменные окружения (не в репозитории)
└── README.md         # Этот файл
```


